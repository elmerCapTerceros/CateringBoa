<div class="flex flex-col flex-auto min-w-0 bg-gradient-to-b from-gray-50 to-gray-100 min-h-screen animate-fade-in">
    <div class="flex-auto p-6 sm:p-10">
        <!-- TITULO -->
        <div class="flex items-center justify-between mb-8">
            <h2 class="text-4xl font-extrabold text-gray-800 tracking-tight hover:scale-[1.02] transition-transform duration-300">
                STOCK
            </h2>

            <!-- CONTADOR -->
            <div class="relative overflow-hidden backdrop-blur-md bg-gray-800  shadow-lg px-6 py-3 rounded-2xl text-sm text-white transition-all duration-500 hover:scale-[1.03] hover:shadow-xl hover:bg-blue-700">
                <span class="absolute inset-0 bg-gradient-to-r from-blue-100/30 to-blue-200/30 opacity-70"></span>
                <div class="relative z-10 flex items-center gap-2 font-medium">
                    Mostrando
                    <span class="font-bold text-white text-base animate-count">{{ stocksFiltrados.length }}</span>
                    de
                    <span class="font-bold text-white text-base">{{ stocks.length }}</span>
                    registros
                </div>
            </div>
        </div>

        <!-- FORM FILTRO -->

        <form [formGroup]="filtroForm" class="mb-6 bg-white p-6 rounded-xl shadow-lg border border-gray-200 hover:shadow-2xl transition-shadow duration-300">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">

                <!-- FILTRO POR ALMACEN -->
                <mat-form-field appearance="outline" class="w-full">
                    <mat-label>Filtrar por almac√©n</mat-label>
                    <mat-select formControlName="almacen">
                        @for (almacen of almacenes; track almacen.value) {
                            <mat-option [value]="almacen.value">
                                {{ almacen.viewValue }}
                            </mat-option>
                        }
                    </mat-select>
                </mat-form-field>

                <!-- FILTRO POR CATEGORIA -->
                <mat-form-field appearance="outline" class="w-full">
                    <mat-label>Filtrar por categor√≠a</mat-label>
                    <mat-select formControlName="categoria">
                        @for (categoria of categorias; track categoria.value) {
                            <mat-option [value]="categoria.value">
                                {{ categoria.viewValue }}
                            </mat-option>
                        }
                    </mat-select>
                </mat-form-field>
            </div>

            <!-- BOTON LIMPIAR -->
            <div class="flex justify-end">
                <button type="button" (click)="limpiarFiltros()" class="px-5 py-2 text-sm rounded-md font-semibold bg-gray-800 text-white hover:bg-blue-700 transition-all duration-300 hover:shadow-md">
                    ‚Ü∫ Limpiar filtros
                </button>
            </div>
        </form>

        <!-- TABLA STOCK -->

        <div class="overflow-x-auto bg-white rounded-lg shadow">
            <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-800 text-white">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider">
                            Almac√©n
                        </th>

                        <th class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider">
                            Categor√≠a
                        </th>

                        <th class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider">
                            Item
                        </th>
                        <th class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider">
                            Cantidad
                        </th>

                        <th class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider">
                            Tipo
                        </th>

                        <th class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider">
                            Acciones
                        </th>
                    </tr>
                </thead>

                <tbody class="bg-white divide-y divide-gray-200">
                    @for (stock of paginatedStocks; track stock.id) {
                        <tr class="hover:bg-gray-50">

                            <td class="px-6 py-4 text-sm text-gray-800 font-medium">
                                {{ stock.almacen }}
                            </td>

                            <td class="px-6 py-4 text-sm text-gray-700">
                                {{ stock.categoria }}
                            </td>

                            <td class="px-6 py-4 text-sm text-gray-700">
                                {{ stock.item }}
                            </td>

                            <td class="px-6 py-4 text-sm text-gray-700">
                                {{ stock.cantidad }}
                            </td>

                            <td class="px-6 py-4 text-sm">
                                {{ stock.tipo }}
                            </td>

                            <!-- ACCIONES BOTONES -->

                            <td class="px-6 py-4 flex justify-center gap-4">

                                <button title="Ver" class="p-2 rounded-full bg-blue-50 hover:bg-blue-100 transition-all duration-300 hover:scale-110">
                                    <mat-icon [svgIcon]="'mat_solid:visibility'"></mat-icon>
                                </button>

                                <button  title="Eliminar" class="p-2 rounded-full bg-red-50 hover:bg-red-100 transition-all duration-300 hover:scale-110">
                                    <mat-icon
                                        [svgIcon]="'mat_solid:delete'"
                                    ></mat-icon>
                                </button>
                            </td>
                        </tr>

                        <!-- MENSAJE REGISTRO NO ENCONTRADOS POR EL FILTRO -->
                    }
                    @empty {
                        <tr>
                            <td
                                colspan="5"
                                class="px-6 py-8 text-center text-gray-500 italic animate-fade-in"
                            >
                                No se encontraron registros con los filtros seleccionados üïµÔ∏è‚Äç‚ôÄÔ∏è
                            </td>
                        </tr>
                    }
                </tbody>
            </table>

        </div>
        <!-- PAGINADOR -->
        <div class="flex justify-end mt-6">
            <mat-paginator
                [length]="stocksFiltrados.length"
                [pageSize]="pageSize"
                [pageSizeOptions]="pageSizeOptions"
                (page)="onPageChange($event)"
                showFirstLastButtons
            ></mat-paginator>
        </div>
    </div>
</div>
