<div class="flex-auto p-6 sm:p-10 overflow-hidden">
    <h2 class="text-3xl font-bold mb-8">Aeronaves operativas</h2>
    <button
        mat-raised-button
        color="primary"
        class="flex items-center gap-2"
        (click)="irAgregarAeronave()">

        <mat-icon>add</mat-icon>
        Agregar Aeronave
    </button>
    <div class="border rounded-lg bg-gray-50 p-4 overflow-x-auto max-w-full h-52">
        <div class="flex gap-4 w-max h-full">
            @for (aeronave of aeronaves; track aeronave.matricula) {
                <mat-card class="w-56 h-full flex-shrink-0 cursor-pointer hover:shadow-lg transition-shadow">
                    <mat-card-header class="pb-2">
                        <mat-card-title class="text-sm font-semibold">
                            {{ aeronave.modelo }}
                        </mat-card-title>
                        <mat-card-subtitle class="text-xs">
                            {{ aeronave.matricula }}
                        </mat-card-subtitle>
                    </mat-card-header>

                    <mat-card-content class="pt-2">
                        <div class="flex flex-col gap-1.5 text-sm">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Tipo de Operación:</span>
                                <span class="font-medium">{{ aeronave.tipoOp }}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Capacidad:</span>
                                <span class="font-medium">{{ aeronave.capacidad }}</span>
                            </div>
                        </div>
                    </mat-card-content>
                </mat-card>
            }
        </div>
    </div>

    <div class="mt-12">
        <h2 class="text-3xl font-bold mb-8">Flotas por Destino</h2>

        <div class="flex flex-col gap-6">
            @for (flota of flotas; track flota.id) {
                <!-- CARD DE FLOTA -->
                <div class="border rounded-xl bg-white p-6 shadow-sm">

                    <!-- HEADER FLOTA CON BADGE -->
                    <div class="mb-4 flex items-center justify-between">
                        <div>
                            <h3 class="text-xl font-semibold">{{ flota.nombre }}</h3>
                            <p class="text-sm text-gray-500">{{ flota.descripcion }}</p>
                        </div>
                        <span
                            class="px-3 py-1 rounded-full text-xs font-medium"
                            [ngClass]="{
                                'bg-blue-100 text-blue-800': flota.tipoFlota === 'Internacional',
                                'bg-green-100 text-green-800': flota.tipoFlota === 'Nacional',
                                'bg-purple-100 text-purple-800': flota.tipoFlota === 'Regional'
                            }">
                            {{ flota.tipoFlota }}
                        </span>
                    </div>

                    <!-- CARRUSEL DE AERONAVES -->
                    <div class="overflow-x-auto">
                        <div class="flex gap-4 pb-2">
                            @for (aeronave of flota.aeronaves; track aeronave.matricula) {
                                <mat-card class="w-80 flex-shrink-0 cursor-pointer hover:shadow-md transition-shadow">
                                    <mat-card-header class="pb-2">
                                        <mat-card-title class="text-sm font-semibold">
                                            {{ aeronave.modelo }}
                                        </mat-card-title>
                                        <mat-card-subtitle class="text-xs">
                                            {{ aeronave.matricula }}
                                        </mat-card-subtitle>
                                    </mat-card-header>

                                    <mat-card-content class="text-sm">
                                        <div class="flex justify-between mb-3">
                                            <span class="text-gray-500">Tipo:</span>
                                            <span>{{ aeronave.tipoOperacion }}</span>
                                        </div>
                                        <div class="flex justify-between mb-3">
                                            <span class="text-gray-500">Capacidad:</span>
                                            <span>{{ aeronave.capacidad }}</span>
                                        </div>

                                        <!-- RUTAS -->
                                        <div class="mt-4 pt-3 border-t">
                                            <p class="text-xs font-semibold text-gray-600 mb-2">Rutas asignadas:</p>
                                            <div class="flex flex-col gap-1">
                                                @for (ruta of aeronave.rutas; track $index) {
                                                    <div
                                                        class="flex items-center justify-between text-xs
                                                          bg-gray-50 p-2 rounded cursor-pointer"
                                                        (click)="irARutas()">

                                                        <span class="font-medium">
                                                            {{ ruta.origen }} → {{ ruta.destino }}
                                                        </span>
                                                        <span class="text-gray-500">
                                                            {{ ruta.frecuenciaSemanal }}x/sem
                                                        </span>
                                                    </div>
                                                }
                                            </div>
                                        </div>
                                    </mat-card-content>
                                </mat-card>
                            }
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</div>
